(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[196],{1745:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teacher/dashboard",function(){return t(8293)}])},8293:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return l}});var r=t(7568),s=t(7582),a=t(5893),c=t(7294),i=t(1163),u=t(3853),o=t.n(u);function l(){var e=(0,c.useState)([]),n=e[0],t=e[1],u=(0,c.useState)(""),l=u[0],h=u[1],d=(0,c.useState)(""),f=d[0],j=d[1],x=(0,c.useState)(""),p=x[0],_=x[1],v=(0,c.useState)("results"),b=v[0],g=v[1],m=(0,c.useState)(1),w=m[0],T=m[1],N=(0,i.useRouter)();(0,c.useEffect)((function(){y(),k()}),[]);var y=function(){var e=(0,r.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,fetch("/api/teacher/checkAuth")];case 1:return[4,n.sent().json()];case 2:return(e=n.sent()).isLoggedIn?h(e.username):N.push("/teacher/login"),[2]}}))}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)((function(){var e,n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/api/teacher/results")];case 1:return(e=r.sent()).ok?[4,e.json()]:[3,3];case 2:return n=r.sent(),t(n),[3,4];case 3:console.error("Failed to fetch results"),r.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,r.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),f!==p?(alert("\u65b0\u5bc6\u7801\u548c\u786e\u8ba4\u5bc6\u7801\u4e0d\u5339\u914d"),[2]):[4,fetch("/api/teacher/changePassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:f})})];case 1:return n.sent().ok?(alert("\u5bc6\u7801\u4fee\u6539\u6210\u529f"),j(""),_("")):alert("\u5bc6\u7801\u4fee\u6539\u5931\u8d25"),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),S=10*w,C=S-10,E=n.slice(C,S);return(0,a.jsxs)("div",{className:o().container,children:[(0,a.jsx)("h1",{children:"\u8bc4\u4f30\u8001\u5e08\u4eea\u8868\u677f"}),(0,a.jsxs)("p",{children:["\u6b22\u8fce\uff0c",l,"\u8001\u5e08"]}),(0,a.jsxs)("div",{className:o().tabs,children:[(0,a.jsx)("button",{className:"results"===b?o().activeTab:"",onClick:function(){return g("results")},children:"\u8bc4\u4f30\u7ed3\u679c"}),(0,a.jsx)("button",{className:"changePassword"===b?o().activeTab:"",onClick:function(){return g("changePassword")},children:"\u4fee\u6539\u5bc6\u7801"})]}),"results"===b&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"\u8bc4\u4f30\u7ed3\u679c"}),0===n.length?(0,a.jsx)("p",{children:"\u60a8\u8fd8\u6ca1\u6709\u8fdb\u884c\u8fc7\u4efb\u4f55\u8bc4\u4f30\u3002"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("table",{className:o().resultsTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"\u5e74\u7ea7"}),(0,a.jsx)("th",{children:"\u73ed\u7ea7"}),(0,a.jsx)("th",{children:"\u5b66\u53f7"}),(0,a.jsx)("th",{children:"\u5b66\u751f\u59d3\u540d"}),(0,a.jsx)("th",{children:"\u5e74\u9f84"}),(0,a.jsx)("th",{children:"\u8bc4\u4f30\u65f6\u95f4"}),(0,a.jsx)("th",{children:"\u7ed3\u679c"})]})}),(0,a.jsx)("tbody",{children:E.map((function(e,n){return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.grade}),(0,a.jsx)("td",{children:e.class}),(0,a.jsx)("td",{children:e.studentId}),(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{children:e.age}),(0,a.jsx)("td",{children:e.date}),(0,a.jsx)("td",{children:e.description})]},n)}))})]}),(0,a.jsx)("div",{className:o().pagination,children:Array.from({length:Math.ceil(n.length/10)},(function(e,n){return(0,a.jsx)("button",{onClick:function(){return T(n+1)},children:n+1},n)}))})]})]}),"changePassword"===b&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"\u4fee\u6539\u5bc6\u7801"}),(0,a.jsxs)("form",{onSubmit:P,className:o().form,children:[(0,a.jsx)("input",{type:"password",value:f,onChange:function(e){return j(e.target.value)},placeholder:"\u65b0\u5bc6\u7801",required:!0}),(0,a.jsx)("input",{type:"password",value:p,onChange:function(e){return _(e.target.value)},placeholder:"\u786e\u8ba4\u65b0\u5bc6\u7801",required:!0}),(0,a.jsx)("button",{type:"submit",children:"\u4fee\u6539\u5bc6\u7801"})]})]})]})}},3853:function(e){e.exports={container:"Teacher_container__NrA4Z",tabs:"Teacher_tabs__qEn7F",activeTab:"Teacher_activeTab__88PcN",form:"Teacher_form__SqzCH",resultsTable:"Teacher_resultsTable__WIV23",pagination:"Teacher_pagination__ZuIkH"}},1163:function(e,n,t){e.exports=t(387)},7568:function(e,n,t){"use strict";function r(e,n,t,r,s,a,c){try{var i=e[a](c),u=i.value}catch(o){return void t(o)}i.done?n(u):Promise.resolve(u).then(r,s)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(s,a){var c=e.apply(n,t);function i(e){r(c,s,a,i,u,"next",e)}function u(e){r(c,s,a,i,u,"throw",e)}i(void 0)}))}}t.d(n,{Z:function(){return s}})}},function(e){e.O(0,[774,888,179],(function(){return n=1745,e(e.s=n);var n}));var n=e.O();_N_E=n}]);