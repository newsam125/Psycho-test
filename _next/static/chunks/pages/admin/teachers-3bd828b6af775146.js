(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{9972:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/teachers",function(){return n(1668)}])},1668:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(7568),i=n(6042),c=n(9396),s=n(7582),a=n(5893),o=n(7294),u=n(1163),l=n(4468),d=n.n(l);function f(){var e=(0,o.useState)([]),t=e[0],n=e[1],l=(0,o.useState)({username:"",password:""}),f=l[0],h=l[1],p=(0,u.useRouter)();(0,o.useEffect)((function(){_(),m()}),[]);var _=function(){var e=(0,r.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,fetch("/api/admin/checkAuth")];case 1:return[4,e.sent().json()];case 2:return e.sent().isLoggedIn||p.push("/admin/login"),[2]}}))}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((function(){var e,t;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/api/admin/teachers")];case 1:return(e=r.sent()).ok?[4,e.json()]:[3,3];case 2:return t=r.sent(),n(t),[3,4];case 3:console.error("Failed to fetch teachers"),r.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)((function(e){return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),[4,fetch("/api/admin/teachers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})];case 1:return t.sent().ok?(h({username:"",password:""}),m()):console.error("Failed to add teacher"),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)((function(e){return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4f4d\u8001\u5e08\u5417\uff1f")?[4,fetch("/api/admin/teachers?id=".concat(e),{method:"DELETE"})]:[3,2];case 1:t.sent().ok?m():console.error("Failed to delete teacher"),t.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,a.jsxs)("div",{className:d().container,children:[(0,a.jsx)("h1",{children:"\u8bc4\u4f30\u8001\u5e08\u7ba1\u7406"}),(0,a.jsxs)("form",{onSubmit:b,className:d().form,children:[(0,a.jsx)("input",{type:"text",value:f.username,onChange:function(e){return h((0,c.Z)((0,i.Z)({},f),{username:e.target.value}))},placeholder:"\u7528\u6237\u540d",required:!0}),(0,a.jsx)("input",{type:"password",value:f.password,onChange:function(e){return h((0,c.Z)((0,i.Z)({},f),{password:e.target.value}))},placeholder:"\u5bc6\u7801",required:!0}),(0,a.jsx)("button",{type:"submit",children:"\u6dfb\u52a0\u8001\u5e08"})]}),(0,a.jsxs)("table",{className:d().resultsTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"\u7528\u6237\u540d"}),(0,a.jsx)("th",{children:"\u64cd\u4f5c"})]})}),(0,a.jsx)("tbody",{children:t.map((function(e){return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.username}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{onClick:function(){return j(e._id)},className:d().deleteButton,children:"\u5220\u9664"})})]},e._id)}))})]})]})}},4468:function(e){e.exports={container:"Admin_container__7Kd1y",tabs:"Admin_tabs__7QZpH",activeTab:"Admin_activeTab__21f_q",resultsTable:"Admin_resultsTable__zNMxl",pagination:"Admin_pagination__3BGw7",deleteButton:"Admin_deleteButton__1tBp_",manageTeachersButton:"Admin_manageTeachersButton__RO9_8"}},1163:function(e,t,n){e.exports=n(387)},7568:function(e,t,n){"use strict";function r(e,t,n,r,i,c,s){try{var a=e[c](s),o=a.value}catch(u){return void n(u)}a.done?t(o):Promise.resolve(o).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,c){var s=e.apply(t,n);function a(e){r(s,i,c,a,o,"next",e)}function o(e){r(s,i,c,a,o,"throw",e)}a(void 0)}))}}n.d(t,{Z:function(){return i}})},9396:function(e,t,n){"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[774,888,179],(function(){return t=9972,e(e.s=t);var t}));var t=e.O();_N_E=t}]);