(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2833:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return t(3134)}])},3134:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return h}});var r=t(7568),s=t(7582),i=t(5893),c=t(7294),a=t(1163),u=t(1664),l=t.n(u),d=t(4468),o=t.n(d);function h(){var n=(0,c.useState)([]),e=n[0],t=n[1],u=(0,c.useState)(""),d=u[0],h=u[1],f=(0,c.useState)("results"),x=f[0],_=f[1],j=(0,c.useState)(1),m=j[0],p=j[1],v=(0,a.useRouter)();(0,c.useEffect)((function(){b(),g()}),[]);var b=function(){var n=(0,r.Z)((function(){var n;return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,fetch("/api/admin/checkAuth")];case 1:return[4,e.sent().json()];case 2:return(n=e.sent()).isLoggedIn?h(n.username):v.push("/admin/login"),[2]}}))}));return function(){return n.apply(this,arguments)}}(),g=function(){var n=(0,r.Z)((function(){var n,e;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/api/admin/results")];case 1:return(n=r.sent()).ok?[4,n.json()]:[3,3];case 2:return e=r.sent(),t(e),[3,4];case 3:console.error("Failed to fetch results"),r.label=4;case 4:return[2]}}))}));return function(){return n.apply(this,arguments)}}(),T=function(){var n=(0,r.Z)((function(n){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u6761\u8bb0\u5f55\u5417\uff1f")?[4,fetch("/api/admin/results?id=".concat(n),{method:"DELETE"})]:[3,2];case 1:e.sent().ok?g():console.error("Failed to delete result"),e.label=2;case 2:return[2]}}))}));return function(e){return n.apply(this,arguments)}}(),N=10*m,w=N-10,k=e.slice(w,N);return(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{children:"\u7ba1\u7406\u5458\u4eea\u8868\u677f"}),(0,i.jsxs)("p",{children:["\u6b22\u8fce\uff0c",d,"\u7ba1\u7406\u5458"]}),(0,i.jsxs)("div",{className:o().tabs,children:[(0,i.jsx)("button",{className:"results"===x?o().activeTab:"",onClick:function(){return _("results")},children:"\u8bc4\u4f30\u7ed3\u679c"}),(0,i.jsx)("button",{className:"manageTeachers"===x?o().activeTab:"",onClick:function(){return _("manageTeachers")},children:"\u7ba1\u7406\u8bc4\u4f30\u8001\u5e08"})]}),"results"===x&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"\u8bc4\u4f30\u7ed3\u679c"}),0===e.length?(0,i.jsx)("p",{children:"\u6682\u65e0\u8bc4\u4f30\u7ed3\u679c\u3002"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("table",{className:o().resultsTable,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"\u5e74\u7ea7"}),(0,i.jsx)("th",{children:"\u73ed\u7ea7"}),(0,i.jsx)("th",{children:"\u5b66\u53f7"}),(0,i.jsx)("th",{children:"\u5b66\u751f\u59d3\u540d"}),(0,i.jsx)("th",{children:"\u5e74\u9f84"}),(0,i.jsx)("th",{children:"\u8bc4\u4f30\u8001\u5e08"}),(0,i.jsx)("th",{children:"\u8bc4\u4f30\u65f6\u95f4"}),(0,i.jsx)("th",{children:"\u7ed3\u679c"}),(0,i.jsx)("th",{children:"\u64cd\u4f5c"})]})}),(0,i.jsx)("tbody",{children:k.map((function(n){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:n.grade}),(0,i.jsx)("td",{children:n.class}),(0,i.jsx)("td",{children:n.studentId}),(0,i.jsx)("td",{children:n.name}),(0,i.jsx)("td",{children:n.age}),(0,i.jsx)("td",{children:n.teacherName}),(0,i.jsx)("td",{children:n.date}),(0,i.jsx)("td",{children:n.description}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:function(){return T(n._id)},className:o().deleteButton,children:"\u5220\u9664"})})]},n._id)}))})]}),(0,i.jsx)("div",{className:o().pagination,children:Array.from({length:Math.ceil(e.length/10)},(function(n,e){return(0,i.jsx)("button",{onClick:function(){return p(e+1)},children:e+1},e)}))})]})]}),"manageTeachers"===x&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"\u7ba1\u7406\u8bc4\u4f30\u8001\u5e08"}),(0,i.jsx)(l(),{href:"/admin/teachers",children:(0,i.jsx)("a",{className:o().manageTeachersButton,children:"\u7ba1\u7406\u8bc4\u4f30\u8001\u5e08"})})]})]})}},4468:function(n){n.exports={container:"Admin_container__7Kd1y",tabs:"Admin_tabs__7QZpH",activeTab:"Admin_activeTab__21f_q",resultsTable:"Admin_resultsTable__zNMxl",pagination:"Admin_pagination__3BGw7",deleteButton:"Admin_deleteButton__1tBp_",manageTeachersButton:"Admin_manageTeachersButton__RO9_8"}},1163:function(n,e,t){n.exports=t(387)},7568:function(n,e,t){"use strict";function r(n,e,t,r,s,i,c){try{var a=n[i](c),u=a.value}catch(l){return void t(l)}a.done?e(u):Promise.resolve(u).then(r,s)}function s(n){return function(){var e=this,t=arguments;return new Promise((function(s,i){var c=n.apply(e,t);function a(n){r(c,s,i,a,u,"next",n)}function u(n){r(c,s,i,a,u,"throw",n)}a(void 0)}))}}t.d(e,{Z:function(){return s}})}},function(n){n.O(0,[774,888,179],(function(){return e=2833,n(n.s=e);var e}));var e=n.O();_N_E=e}]);